{
	"agent": {
		"run_as_user": "root",
		"metrics_collection_interval": ${cwa_metrics_collection_interval},
		"logfile": "/opt/aws/amazon-cloudwatch-agent/logs/amazon-cloudwatch-agent.log"
	},
	"metrics": {
		"namespace" : "${cwa_namespace}",
		"metrics_collected": {
		  "cpu": {
			"resources": [
			  "*"
			],
			"measurement": [
			  {"name": "cpu_usage_idle", "rename": "CPU_USAGE_IDLE", "unit": "Percent"},
			  {"name": "cpu_usage_nice", "unit": "Percent"},
			  "cpu_usage_guest"
			],
			"totalcpu": false,
			"metrics_collection_interval": ${cwa_cpu_metrics_collection_interval}
		  },
		  "disk": {
			"resources": [
			  "/",
			  "/tmp"
			],
			"measurement": [
			  {"name": "free", "rename": "DISK_FREE", "unit": "Gigabytes"},
			  "total",
			  "used"
			],
			  "ignore_file_system_types": [
			  "sysfs", "devtmpfs"
			],
			"metrics_collection_interval": ${cwa_disk_measurement_metrics_collection_interval}
		  },
		  "diskio": {
			"resources": [
			  "*"
			],
			"measurement": [
			  "reads",
			  "writes",
			  "read_time",
			  "write_time",
			  "io_time"
			],
			"metrics_collection_interval": ${cwa_disk_io_metrics_collection_interval}
		  },
		  "swap": {
			"measurement": [
			  "swap_used",
			  "swap_free",
			  "swap_used_percent"
			]
		  },
		  "mem": {
			"measurement": [
			  "mem_used",
			  "mem_cached",
			  "mem_total"
			],
			"metrics_collection_interval": ${cwa_mem_metrics_collection_interval}
		  },
		  "net": {
			"resources": [
			  "eth0"
			],
			"measurement": [
			  "bytes_sent",
			  "bytes_recv",
			  "drop_in",
			  "drop_out"
			]
		  },
		  "netstat": {
			"measurement": [
			  "tcp_established",
			  "tcp_syn_sent",
			  "tcp_close"
			],
			"metrics_collection_interval": ${cwa_netstat_metrics_collection_interval}
		  },
		  "processes": {
			"measurement": [
			  "running",
			  "sleeping",
			  "dead"
			]
		  }
		},
		"append_dimensions": {
		  "ImageId": "$${aws:ImageId}",
		  "InstanceId": "$${aws:InstanceId}",
		  "InstanceType": "$${aws:InstanceType}",
		  "AutoScalingGroupName": "$${aws:AutoScalingGroupName}"
		},
		"aggregation_dimensions" : [["ImageId"], ["InstanceId", "InstanceType"], ["d1"],[]],
		"force_flush_interval" : 30
	},
	"logs": {
		"logs_collected": {
			"files": {
				"collect_list": [
					{
						"file_path": "/opt/aws/amazon-cloudwatch-agent/logs/amazon-cloudwatch-agent.log",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "amazon-cloudwatch-agent.log",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/messages",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "messages",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/secure",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "secure",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/cloud-init.log",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "cloud-init.log",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/cloud-init-output.log",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "cloud-init-output.log",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/userhost/config_hcs.log",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "config_hcs.log",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/userhost/userhost.out",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "userhost.out",
						"timezone": "UTC"
					},
					{
						"file_path": "/var/log/sysdig.log",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "sysdig"
					},
					{
						"file_path": "/var/log/ecs_instance_health_check.log",
						"log_group_name": "${cwa_log_group_name}",
						"log_stream_name": "ecs_instance_health_check"
					}
				]
			}
		}
	}
}
